<?plantuml 1.2026.1beta5?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="895px" preserveAspectRatio="none" style="width:927px;height:895px;background:#FEFEFE;" version="1.1" viewBox="0 0 927 895" width="927px" zoomAndPan="magnify"><title>Agent Client Protocol - Architecture Overview</title><defs/><g><rect fill="#FEFEFE" height="895" style="stroke:none;stroke-width:1;" width="927" x="0" y="0"/><g class="title" data-source-line="4"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="567.5313" x="175.6833" y="35.4209">Agent Client Protocol - Architecture Overview</text></g><!--cluster IDE--><g class="cluster" data-qualified-name="IDE" data-source-line="6" id="ent0002"><path d="M98.5,57.6094 L232.6367,57.6094 A3.75,3.75 0 0 1 235.1367,60.1094 L242.1367,79.9063 L768.5,79.9063 A2.5,2.5 0 0 1 771,82.4063 L771,334.5194 A2.5,2.5 0 0 1 768.5,337.0194 L98.5,337.0194 A2.5,2.5 0 0 1 96,334.5194 L96,60.1094 A2.5,2.5 0 0 1 98.5,57.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="96" x2="242.1367" y1="79.9063" y2="79.9063"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="133.1367" x="100" y="72.6045">Code Editor / IDE</text></g><!--cluster client--><g class="cluster" data-qualified-name="IDE.client" data-source-line="12" id="ent0007"><path d="M144.5,215.7194 L227.7705,215.7194 A3.75,3.75 0 0 1 230.2705,218.2194 L237.2705,238.0163 L744.5,238.0163 A2.5,2.5 0 0 1 747,240.5163 L747,310.5194 A2.5,2.5 0 0 1 744.5,313.0194 L144.5,313.0194 A2.5,2.5 0 0 1 142,310.5194 L142,218.2194 A2.5,2.5 0 0 1 144.5,215.7194" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="142" x2="237.2705" y1="238.0163" y2="238.0163"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="82.2705" x="146" y="230.7145">ACP Client</text></g><!--cluster Agent--><g class="cluster" data-qualified-name="Agent" data-source-line="19" id="ent0011"><path d="M13.5,409.8294 L127.6279,409.8294 A3.75,3.75 0 0 1 130.1279,412.3294 L137.1279,432.1262 L345.5,432.1262 A2.5,2.5 0 0 1 348,434.6262 L348,879.5194 A2.5,2.5 0 0 1 345.5,882.0194 L13.5,882.0194 A2.5,2.5 0 0 1 11,879.5194 L11,412.3294 A2.5,2.5 0 0 1 13.5,409.8294" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="11" x2="137.1279" y1="432.1262" y2="432.1262"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="113.1279" x="15" y="424.8245">Agent Process</text></g><!--cluster provider--><g class="cluster" data-qualified-name="provider" data-source-line="27" id="ent0017"><path d="M381.6834,794.4423 C385.2207,788.3517 390.1706,788.807 393.9461,794.1876 C397.3114,788.1006 404.2433,787.3599 407.9467,793.8099 C410.5629,787.2529 416.5756,786.0651 420.5209,792.5262 C424.1033,785.1592 429.0811,785.8348 433.739,791.4295 C438.3654,784.3699 444.4033,785.6038 448.5029,792.0072 C452.5043,786.0435 456.5076,785.4633 460.7638,791.7522 C463.2831,784.8426 469.4074,784.6105 473.2757,790.4257 C477.6191,784.0095 484.8077,783.8012 488.549,791.0964 C492.3489,785.7689 498.2785,784.7191 501.503,791.7019 C504.6916,786.6889 509.6554,786.591 513.1047,791.3938 C517.9349,785.2364 523.8101,786.1222 526.7517,793.3232 C530.5566,785.7643 537.4963,786.5827 541.4044,793.2168 C544.8804,787.1615 550.5556,788.4514 552.9631,794.258 C557.6836,787.0081 562.2922,787.6689 566.6872,794.5736 C573.8833,797.4877 573.0314,803.1209 567.785,807.1235 C576.0677,808.7426 576.5601,814.5256 571.7404,820.1294 C579.2378,823.7294 578.4444,829.2083 572.4305,833.5054 C579.0113,837.4734 578.5764,844.3304 571.4401,847.3146 C576.0649,853.0679 576.503,858.668 568.1676,861.413 C573.0293,866.4129 573.6821,871.6582 566.2143,874.8683 C563.6164,881.6417 557.28,881.4895 553.0944,876.6643 C549.5735,883.119 544.6891,883.5119 540.349,877.502 C537.5124,883.1848 531.5112,885.0536 527.598,878.6364 C523.8044,885.4506 519.7847,885.3289 515.2841,879.3151 C511.8451,885.099 505.6194,886.5115 501.5189,880.0592 C498.7592,886.5389 492.6883,887.8833 488.2293,881.8664 C484.2152,888.9931 478.9195,888.8517 474.6442,882.1225 C470.6287,888.3248 463.7681,888.3536 460.6201,881.2109 C456.6983,885.553 450.8449,885.2501 448.817,879.0837 C444.8578,884.9357 438.8183,885.7268 434.8718,879.0696 C431.0272,886.5105 425.1096,885.1385 421.1613,879.1756 C416.3777,885.7453 412.5053,884.1732 408.5233,878.3576 C402.415,883.855 398.5043,881.9082 395.2847,875.2195 C391.0865,881.0094 386.0264,881.7374 382.4536,874.5987 C376.1343,872.926 373.3061,867.8497 377.996,862.2143 C370.4946,857.913 369.1765,853.4307 376.2633,847.4207 C370.3379,844.5615 368.4703,839.4699 374.4671,834.9004 C368.2658,830.7097 369.6861,824.5939 375.4399,821.2556 C369.2383,814.853 371.3033,809.2266 379.542,806.9707 C374.1036,802.0457 375.5128,797.3831 381.6834,794.4423" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="103.7764" x="421.1118" y="810.7145">LLM Provider</text></g><!--entity chatui--><g class="entity" data-qualified-name="IDE.chatui" data-source-line="7" id="ent0003"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="91.543" x="112.23" y="92.6094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="183.773" y="97.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="181.773" y="99.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="181.773" y="103.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="51.543" x="127.23" y="125.6045">Chat UI</text></g><!--entity editor--><g class="entity" data-qualified-name="IDE.editor" data-source-line="8" id="ent0004"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="110.3281" x="238.84" y="92.6094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="329.1681" y="97.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="327.1681" y="99.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="327.1681" y="103.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.3281" x="253.84" y="125.6045">File Editor</text></g><!--entity term_ui--><g class="entity" data-qualified-name="IDE.term_ui" data-source-line="9" id="ent0005"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="169.876" x="384.06" y="92.6094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="533.936" y="97.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="531.936" y="99.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="531.936" y="103.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="129.876" x="399.06" y="125.6045">Terminal Emulator</text></g><!--entity perms--><g class="entity" data-qualified-name="IDE.perms" data-source-line="10" id="ent0006"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="165.2959" x="589.35" y="92.6094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="734.6459" y="97.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="732.6459" y="99.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="732.6459" y="103.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="125.2959" x="604.35" y="125.6045">Permission Dialog</text></g><!--entity rpc_handler--><g class="entity" data-qualified-name="IDE.client.rpc_handler" data-source-line="13" id="ent0008"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="167.0801" x="158.46" y="250.7194"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="305.5401" y="255.7194"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="303.5401" y="257.7194"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="303.5401" y="261.7194"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="127.0801" x="173.46" y="283.7145">JSON-RPC Handler</text></g><!--entity client_session--><g class="entity" data-qualified-name="IDE.client.client_session" data-source-line="14" id="ent0009"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="159.2324" x="360.38" y="250.7194"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="499.6124" y="255.7194"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="497.6124" y="257.7194"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="497.6124" y="261.7194"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="119.2324" x="375.38" y="283.7145">Session Manager</text></g><!--entity caps--><g class="entity" data-qualified-name="IDE.client.caps" data-source-line="15" id="ent0010"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="175.9668" x="555.02" y="250.7194"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="710.9868" y="255.7194"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="708.9868" y="257.7194"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="708.9868" y="261.7194"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="135.9668" x="570.02" y="283.7145">Capability Manager</text></g><!--entity agent_rpc--><g class="entity" data-qualified-name="Agent.agent_rpc" data-source-line="20" id="ent0012"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="179.9385" x="152.03" y="444.8294"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="311.9685" y="449.8294"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="309.9685" y="451.8294"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="309.9685" y="455.8294"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="139.9385" x="167.03" y="477.8245">JSON-RPC Processor</text></g><!--entity session_ctrl--><g class="entity" data-qualified-name="Agent.session_ctrl" data-source-line="21" id="ent0013"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="167.0391" x="161.48" y="552.1294"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="308.5191" y="557.1294"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="306.5191" y="559.1294"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="306.5191" y="563.1294"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="127.0391" x="176.48" y="585.1245">Session Controller</text></g><!--entity llm--><g class="entity" data-qualified-name="Agent.llm" data-source-line="22" id="ent0014"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.8076" x="197.6" y="675.4294"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="312.4076" y="680.4294"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="310.4076" y="682.4294"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="310.4076" y="686.4294"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="94.8076" x="212.6" y="708.4245">LLM Interface</text></g><!--entity tools--><g class="entity" data-qualified-name="Agent.tools" data-source-line="23" id="ent0015"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="136.1475" x="26.93" y="675.4294"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="143.0775" y="680.4294"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="141.0775" y="682.4294"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="141.0775" y="686.4294"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="96.1475" x="41.93" y="708.4245">Tool Executor</text></g><!--entity mcp--><g class="entity" data-qualified-name="Agent.mcp" data-source-line="24" id="ent0016"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="115.2773" x="37.36" y="819.7194"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="132.6373" y="824.7194"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="130.6373" y="826.7194"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="130.6373" y="830.7194"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="75.2773" x="52.36" y="852.7145">MCP Client</text></g><!--entity model--><g class="entity" data-qualified-name="provider.model" data-source-line="28" id="ent0018"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="169.9443" x="388.03" y="819.7194"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="537.9743" y="824.7194"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="535.9743" y="826.7194"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="535.9743" y="830.7194"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="129.9443" x="403.03" y="852.7145">Claude / GPT / etc.</text></g><!--entity storage--><g class="entity" data-qualified-name="storage" data-source-line="31" id="ent0019"><path d="M367.68,685.9294 C367.68,675.9294 434.0013,675.9294 434.0013,675.9294 C434.0013,675.9294 500.3226,675.9294 500.3226,685.9294 L500.3226,711.2262 C500.3226,721.2262 434.0013,721.2262 434.0013,721.2262 C434.0013,721.2262 367.68,721.2262 367.68,711.2262 L367.68,685.9294" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M367.68,685.9294 C367.68,695.9294 434.0013,695.9294 434.0013,695.9294 C434.0013,695.9294 500.3226,695.9294 500.3226,685.9294" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="112.6426" x="377.68" y="712.9245">Session Storage</text></g><g class="entity" data-qualified-name="GMN31" data-source-line="53" id="ent0032"><path d="M787.1,215.8994 L787.1,331.8291 L920.8979,331.8291 L920.8979,225.8994 L910.8979,215.8994 L787.1,215.8994" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M910.8979,215.8994 L910.8979,225.8994 L920.8979,225.8994 L910.8979,215.8994" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.1294" x="793.1" y="232.9663">Messages:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="63.0068" x="793.1" y="248.0991">- initialize</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88.1943" x="793.1" y="263.2319">- session/new</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.8877" x="793.1" y="278.3647">- session/prompt</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="103.4351" x="793.1" y="293.4975">- session/cancel</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112.7979" x="793.1" y="308.6303">- fs/read_text_file</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.2876" x="793.1" y="323.7631">- terminal/create</text></g><!--link chatui to client_session--><g class="link" data-entity-1="ent0003" data-entity-2="ent0009" data-link-type="dependency" data-source-line="34" id="lnk20"><path d="M180.39,139.3094 C196.89,154.6794 220.62,174.2694 245,185.8994 C285.27,205.1194 301.99,190.1294 343,207.7194 C368.35,218.5994 389.3822,232.6569 407.9822,246.8669" fill="none" id="chatui-to-client_session" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="412.75,250.5094,408.0266,241.8671,408.7768,247.4739,403.1699,248.2242,412.75,250.5094" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="90.9111" x="246" y="181.9663">user message</text></g><!--link editor to client_session--><g class="link" data-entity-1="ent0004" data-entity-2="ent0009" data-link-type="dependency" data-source-line="35" id="lnk21"><path d="M314.92,139.1194 C342.59,168.7094 387.0121,216.2067 414.7821,245.9067" fill="none" id="editor-to-client_session" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="418.88,250.2894,415.655,240.9835,415.4651,246.6372,409.8115,246.4473,418.88,250.2894" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="73.1567" x="359" y="181.9663">file context</text></g><!--reverse link term_ui to client_session--><g class="link" data-entity-1="ent0005" data-entity-2="ent0009" data-link-type="dependency" data-source-line="36" id="lnk22"><path d="M463.7535,145.0183 C458.2535,174.6083 449.71,220.5894 444.19,250.2894" fill="none" id="term_ui-backto-client_session" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="464.85,139.1194,459.2727,147.2368,463.9363,144.0352,467.1379,148.6988,464.85,139.1194" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101.5435" x="459" y="181.9663">terminal output</text></g><!--reverse link perms to client_session--><g class="link" data-entity-1="ent0006" data-entity-2="ent0009" data-link-type="dependency" data-source-line="37" id="lnk23"><path d="M633.7818,142.4687 C589.8018,172.0587 517.69,220.5894 473.55,250.2894" fill="none" id="perms-backto-client_session" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="638.76,139.1194,629.0599,140.8246,634.6115,141.9105,633.5257,147.4621,638.76,139.1194" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.0552" x="591" y="181.9663">permission request</text></g><!--link rpc_handler to agent_rpc--><g class="link" data-entity-1="ent0008" data-entity-2="ent0012" data-link-type="dependency" data-source-line="40" id="lnk24"><path d="M242,303.2794 C242,340.1994 242,401.3894 242,438.4094" fill="none" id="rpc_handler-agent_rpc" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="242,297.2794,238,306.2794,242,302.2794,246,306.2794,242,297.2794" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="242,444.4094,246,435.4094,242,439.4094,238,435.4094,242,444.4094" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="62.6831" x="244.0632" y="374.8963">JSON-RPC</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="64.8096" x="243" y="390.0291">over stdio</text></g><!--link agent_rpc to session_ctrl--><g class="link" data-entity-1="ent0012" data-entity-2="ent0013" data-link-type="dependency" data-source-line="43" id="lnk25"><path d="M242.64,491.5694 C243.15,509.3394 243.6778,527.9718 244.1878,545.7318" fill="none" id="agent_rpc-to-session_ctrl" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="244.36,551.7294,248.1,542.6183,244.2165,546.7314,240.1033,542.8479,244.36,551.7294" style="stroke:#000000;stroke-width:1;"/></g><!--link session_ctrl to llm--><g class="link" data-entity-1="ent0013" data-entity-2="ent0014" data-link-type="dependency" data-source-line="44" id="lnk26"><path d="M248.71,598.8094 C252.31,620.5994 256.7451,647.4991 260.3251,669.2391" fill="none" id="session_ctrl-to-llm" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="261.3,675.1594,263.7845,665.629,260.4876,670.2258,255.8908,666.9289,261.3,675.1594" style="stroke:#000000;stroke-width:1;"/></g><!--link session_ctrl to tools--><g class="link" data-entity-1="ent0013" data-entity-2="ent0015" data-link-type="dependency" data-source-line="45" id="lnk27"><path d="M217.14,598.8094 C190.28,620.5294 154.525,649.4361 127.635,671.1861" fill="none" id="session_ctrl-to-tools" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="122.97,674.9594,132.483,672.4094,126.8575,671.815,127.452,666.1894,122.97,674.9594" style="stroke:#000000;stroke-width:1;"/></g><!--link tools to mcp--><g class="link" data-entity-1="ent0015" data-entity-2="ent0016" data-link-type="dependency" data-source-line="46" id="lnk28"><path d="M95,722.1194 C95,748.7694 95,786.8294 95,813.4294" fill="none" id="tools-to-mcp" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="95,819.4294,99,810.4294,95,814.4294,91,810.4294,95,819.4294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="61.3755" x="96" y="764.7863">MCP calls</text></g><!--link llm to model--><g class="link" data-entity-1="ent0014" data-entity-2="ent0018" data-link-type="dependency" data-source-line="47" id="lnk29"><path d="M297.96,722.1194 C336.91,748.7694 396.368,789.4415 435.248,816.0415" fill="none" id="llm-to-model" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="440.2,819.4294,435.0307,811.0462,436.0734,816.6061,430.5134,817.6488,440.2,819.4294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53.8091" x="363" y="764.7863">API calls</text></g><!--link session_ctrl to storage--><g class="link" data-entity-1="ent0013" data-entity-2="ent0019" data-link-type="dependency" data-source-line="50" id="lnk30"><path d="M280.11,598.8094 C314.27,620.7294 360.7902,650.589 394.6702,672.329" fill="none" id="session_ctrl-to-storage" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="399.72,675.5694,394.3055,667.3424,395.5118,672.8691,389.9851,674.0754,399.72,675.5694" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.8765" x="351" y="641.4963">persist sessions</text></g><!--link rpc_handler to GMN31--><g class="link" data-entity-1="ent0008" data-entity-2="ent0032" data-link-type="association" data-source-line="53" id="lnk33"><path d="M260.43,250.5994 C281.56,225.9894 318.71,188.6494 360.5,173.3094 C437.48,145.0494 652.19,145.9894 729.5,173.3094 C754.65,182.1994 778.44,198.5594 798.36,215.5394" fill="none" id="rpc_handler-GMN31" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><?plantuml-src RLHDRzim3BthLt3TOISlzs8e4BZfbg5PWxKzTOEXoamYL9OyYUww3Vtl8oKxJJyGm9R8f-T7FYhlQ8STGk-qzIhTMT_hg3kurUPk6yFWspgu4E7zsK9-If4bXp3VeYUedPNNEWOA9ZYeO1xDpX8Q6YB2nJt6Uuk_bUgPJMyHZkhG8YnQIqmvW-NfuWXqaZVyKm0tzKuJN2z_Ij3mUh0IFRDkEfGpc9UIkSBOMQyTBBh1wIbF76tAqRK0KhB1mwdLBcmpeETeKfpVwvhNwx6QBCYKmaGJatozlFXMVL_Ny4Nxrc7vIEnDiolxWhh4yfsLzanPG8MdIILLSBNkzQrrbluyX-e-CU1HFHwqgxIP-skO8IihaToilQmnFrQl1T6mF7KWgWwUOd2J-55GOoWwWPsVhs3fkMyRRJ0ZdEjoWmFRkdX0C-oRon4HUhFQjop7EzEBTEF2qCAH4BAiUzjYpBhxSJFwxFJ0Wp23p-ihVYAPZuM4nyC9JQj9t-h4BPWgk6G1N5ecIsMjr0UuJinfHResnBYaojn0LPsyQ3ySmo3eZhTokepHsy2DZ9pXfk43gN6Uu5DLlKRID89Xe7uWbMVhRMZ_D8mHVmsOI2eeFQoAiIPqtU2jqLABEfWnOJnvyfRP9lj_-C3tZ7lIsY1yXIYtX6KbzNH669uvVxZ9MN7zLR0udfzvpqxpvyL-enrd-529YtcScQ-NOuRLy0LCDX5wWw-PHnzBQmGsoUEZFX12jDiTGTYyk6shuc0wvdN5fLhYkst_OjwE53FFVpo7Uvx0hgTd8QDPbikXJPf5r6qZXZVYVevEviuC9ub7nhSWmlu3?></g></svg>