<?plantuml 1.2026.1beta5?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="714px" preserveAspectRatio="none" style="width:734px;height:714px;background:#FFFFFF;" version="1.1" viewBox="0 0 734 714" width="734px" zoomAndPan="magnify"><title>ACP Protocol - File System Operations</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="473.8057" x="128.9937" y="35.4209">ACP Protocol - File System Operations</text><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="A" id="part1-lifeline"><g><title>Agent</title><rect fill="#000000" fill-opacity="0.00000" height="596.3203" width="8" x="235.7197" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="239" x2="239" y1="82.9063" y2="679.2266"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="C" id="part2-lifeline"><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="596.3203" width="8" x="409.0737" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="412.8086" x2="412.8086" y1="82.9063" y2="679.2266"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="E" id="part3-lifeline"><g><title>Editor Buffer</title><rect fill="#000000" fill-opacity="0.00000" height="596.3203" width="8" x="632.4219" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="636.1284" x2="636.1284" y1="82.9063" y2="679.2266"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="A" id="part1-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="55.4395" x="212" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="41.4395" x="219" y="71.6045">Agent</text></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="A" id="part1-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="55.4395" x="212" y="678.2266"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="41.4395" x="219" y="698.2217">Agent</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="C" id="part2-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="54.5303" x="385.8086" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="392.8086" y="71.6045">Client</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="C" id="part2-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="54.5303" x="385.8086" y="678.2266"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="392.8086" y="698.2217">Client</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="E" id="part3-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.5869" x="585.1284" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.5869" x="592.1284" y="71.6045">Editor Buffer</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="E" id="part3-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.5869" x="585.1284" y="678.2266"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.5869" x="592.1284" y="698.2217">Editor Buffer</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="722.793" x="5" y="113.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="727.793" y1="113.4727" y2="113.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="727.793" y1="116.4727" y2="116.4727"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="86.5664" x="323.1133" y="102.9063"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="68.0405" x="329.1133" y="118.9731">Read File</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#000000" points="401.0737,194.0039,411.0737,198.0039,401.0737,202.0039,405.0737,198.0039" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="239.7197" x2="407.0737" y1="198.0039" y2="198.0039"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="103.9746" x="246.7197" y="192.938">fs/read_text_file</text></g><path d="M418,141.0391 L418,241.0391 L717,241.0391 L717,151.0391 L707,141.0391 L418,141.0391" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M707,141.0391 L707,151.0391 L717,151.0391 L707,141.0391" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="424" y="158.106">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="179.7656" x="432.2646" y="173.2388">"sessionId": "sess_abc123",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="270.4546" x="432.2646" y="188.3716">"path": "/home/user/project/src/main.py",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="64.6064" x="432.2646" y="203.5044">"line": 10,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="65.6094" x="432.2646" y="218.6372">"limit": 50</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="424" y="233.77">}</text><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg3"><polygon fill="#000000" points="624.4219,263.9688,634.4219,267.9688,624.4219,271.9688,628.4219,267.9688" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="413.0737" x2="630.4219" y1="267.9688" y2="267.9688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="199.3481" x="420.0737" y="262.9028">Get content (may be unsaved)</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg4"><polygon fill="#000000" points="424.0737,293.1016,414.0737,297.1016,424.0737,301.1016,420.0737,297.1016" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="418.0737" x2="635.4219" y1="297.1016" y2="297.1016"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.5239" x="430.0737" y="292.0356">Current buffer state</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg5"><polygon fill="#000000" points="250.7197,340.3672,240.7197,344.3672,250.7197,348.3672,246.7197,344.3672" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="244.7197" x2="412.0737" y1="344.3672" y2="344.3672"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147.6973" x="256.7197" y="339.3013">ReadTextFileResponse</text></g><path d="M10,310.1016 L10,365.1016 L234,365.1016 L234,320.1016 L224,310.1016 L10,310.1016" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M224,310.1016 L224,320.1016 L234,320.1016 L224,310.1016" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="16" y="327.1685">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.7109" x="24.2646" y="342.3013">"content": "def main():\n    ..."</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="16" y="357.4341">}</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="722.793" x="5" y="391.0664"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="727.793" y1="391.0664" y2="391.0664"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="727.793" y1="394.0664" y2="394.0664"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="89.8989" x="321.447" y="380.5"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="71.373" x="327.447" y="396.5669">Write File</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg7"><polygon fill="#000000" points="401.0737,464.0313,411.0737,468.0313,401.0737,472.0313,405.0737,468.0313" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="239.7197" x2="407.0737" y1="468.0313" y2="468.0313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.0977" x="246.7197" y="462.9653">fs/write_text_file</text></g><path d="M418,418.6328 L418,503.6328 L712,503.6328 L712,428.6328 L702,418.6328 L418,418.6328" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M702,418.6328 L702,428.6328 L712,428.6328 L702,418.6328" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="424" y="435.6997">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="179.7656" x="432.2646" y="450.8325">"sessionId": "sess_abc123",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="264.7417" x="432.2646" y="465.9653">"path": "/home/user/project/config.json",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203.9121" x="432.2646" y="481.0981">"content": "{ \"debug\": true }"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="424" y="496.231">}</text><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg9"><polygon fill="#000000" points="624.4219,526.4297,634.4219,530.4297,624.4219,534.4297,628.4219,530.4297" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="413.0737" x2="630.4219" y1="530.4297" y2="530.4297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.3271" x="420.0737" y="525.3638">Update buffer / create file</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg10"><polygon fill="#000000" points="250.7197,558.5625,240.7197,562.5625,250.7197,566.5625,246.7197,562.5625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="244.7197" x2="412.0737" y1="562.5625" y2="562.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.354" x="256.7197" y="557.4966">WriteTextFileResponse</text></g><path d="M124,543.4297 L124,568.4297 L233,568.4297 L233,553.4297 L223,543.4297 L124,543.4297" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M223,543.4297 L223,553.4297 L233,553.4297 L223,543.4297" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88.8291" x="130" y="560.4966">null (success)</text><path d="M204,578.5625 L204,663.5625 L447,663.5625 L447,588.5625 L437,578.5625 L204,578.5625" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M437,578.5625 L437,588.5625 L447,588.5625 L437,578.5625" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="86.7217" x="216.4268" y="595.6294">Key features:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="209.4854" x="216.4268" y="610.7622">- Access to unsaved editor state</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182.0381" x="216.4268" y="625.895">- Client tracks modifications</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.1587" x="216.4268" y="641.0278">- Creates files if missing</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182.7109" x="216.4268" y="656.1606">- All paths must be absolute</text><?plantuml-src jLF1Yjim4BthAwO-9R2nTrjwCQJWchIK7hfik_GI28eyJhIr9QCPRHkM_VUER0Ssi3tMj_5x6httPlI6ZzWZ39ssJYcst25KzItS1i_U-0vMyCdAl-ydOkpXsu11i_MEb1fqO6lie1r3LXtGSGQQeBe4wiwUaVeIsJIMVO2FiMqnZ8IDKkirtA5kfalNQwKgM7s06afegGY2x1Z_yAuLM3dF2C4UZgoU5416I2JIlZHPEHKxlJStRzzbLmaTD1yJK1nzZqKa3CKG_0CQBYYOefS0yk4qSJlhKBWtrtFLMvRo_RLwLkWQI1ShLITb6r7s6HcCTom-OT7h4-mHeYFzYCrIRM0r6wXZ28co7mq3iPwx25u9ddp_47F9-XtI827F7ZjiPulpDSb7WoqaqOjbkNKWNvxdsOL0oV9di7B-rJ1_9-X_f2aQMtl87yYxYVj2z1DiHVW-7hPISOW8pzdheTuFZUHp3gi08yENUfJw8hJHuBzJAy75heC5HMF4mb9Da7-KdjMLR2J0Lpn1AxrZG2gbNa4rSe7zUOg0qwfE8qkKQQl5WJQ_27hVsDQQ-M6C-AYMHha4LYPb9KrtcFgBefIV78p4QLlqddmNfVSvYBy0?></g></svg>