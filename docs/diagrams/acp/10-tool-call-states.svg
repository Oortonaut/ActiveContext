<?plantuml 1.2026.1beta5?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="STATE" height="657px" preserveAspectRatio="none" style="width:630px;height:657px;background:#FFFFFF;" version="1.1" viewBox="0 0 630 657" width="630px" zoomAndPan="magnify"><title>ACP Protocol - Tool Call Status Lifecycle</title><defs/><g><g class="title" data-source-line="3"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="496.0635" x="62.775" y="35.4209">ACP Protocol - Tool Call Status Lifecycle</text></g><g><rect fill="#FFFFFF" height="78.2031" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="141.5293" x="198.2" y="173.4694"/><line style="stroke:#000000;stroke-width:1;" x1="198.2" x2="339.7293" y1="199.7662" y2="199.7662"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="56.9092" x="240.5101" y="191.4645">pending</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="75.1348" x="203.2" y="215.9049">Tool created</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="121.5293" x="203.2" y="229.8737">Awaiting permission</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="111.6445" x="203.2" y="243.8424">or streaming input</text></g><g><rect fill="#FFFFFF" height="64.2344" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="173.2227" x="182.36" y="362.5394"/><line style="stroke:#000000;stroke-width:1;" x1="182.36" x2="355.5827" y1="388.8362" y2="388.8362"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.8145" x="228.5641" y="380.5345">in_progress</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="88.4941" x="187.36" y="404.9749">Tool executing</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="153.2227" x="187.36" y="418.9437">May send output updates</text></g><g><rect fill="#FFFFFF" height="64.2344" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="145.1738" x="107.38" y="503.7794"/><line style="stroke:#000000;stroke-width:1;" x1="107.38" x2="252.5538" y1="530.0763" y2="530.0763"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="74.2793" x="142.8273" y="521.7745">completed</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="125.1738" x="112.38" y="546.2149">Execution successful</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="95.5957" x="112.38" y="560.1837">Result available</text></g><g><rect fill="#FFFFFF" height="64.2344" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="150.2773" x="287.83" y="503.7794"/><line style="stroke:#000000;stroke-width:1;" x1="287.83" x2="438.1073" y1="530.0763" y2="530.0763"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="38.7871" x="343.5751" y="521.7745">failed</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="92.5957" x="292.83" y="546.2149">Execution error</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="130.2773" x="292.83" y="560.1837">Error details provided</text></g><ellipse cx="268.97" cy="67.6094" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><ellipse cx="270.97" cy="640.0094" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1;"/><ellipse cx="270.97" cy="640.0094" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1;"/><g class="entity" data-qualified-name="GMN2" data-source-line="26" id="ent0003"><path d="M374.32,154.6094 L374.32,208.5794 L339.95,212.5794 L374.32,216.5794 L374.32,270.5391 A0,0 0 0 0 374.32,270.5391 L623.6135,270.5391 A0,0 0 0 0 623.6135,270.5391 L623.6135,164.6094 L613.6135,154.6094 L374.32,154.6094 A0,0 0 0 0 374.32,154.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M613.6135,154.6094 L613.6135,164.6094 L623.6135,164.6094 L613.6135,154.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.2651" x="380.32" y="171.6763">Tool call fields:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="69.7925" x="380.32" y="186.8091">- toolCallId</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="34.2393" x="380.32" y="201.9419">- title</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="228.2935" x="380.32" y="217.0747">- kind (read/edit/delete/execute/...)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.769" x="380.32" y="232.2075">- status</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.5566" x="380.32" y="247.3403">- content (optional)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.1387" x="380.32" y="262.4731">- locations (optional)</text></g><!--link *start* to pending--><g class="link" data-entity-1="ent0002" data-entity-2="ent0002" data-link-type="dependency" data-source-line="13" id="lnk3"><path d="M268.97,77.9894 C268.97,96.9394 268.97,134.7194 268.97,167.0194" fill="none" id="*start*-to-pending" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="268.97,173.0194,272.97,164.0194,268.97,168.0194,264.97,164.0194,268.97,173.0194" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.6943" x="269.97" y="120.6763">tool_call_update created</text></g><!--link pending to progress--><g class="link" data-entity-1="ent0002" data-entity-2="ent0003" data-link-type="dependency" data-source-line="15" id="lnk4"><path d="M268.97,251.7694 C268.97,284.5994 268.97,325.3794 268.97,356.1194" fill="none" id="pending-to-progress" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="268.97,362.1194,272.97,353.1194,268.97,357.1194,264.97,353.1194,268.97,362.1194" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.0898" x="269.97" y="313.6063">Permission granted</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113.0898" x="276.47" y="328.7391">or auto-approved</text></g><!--link pending to failed--><g class="link" data-entity-1="ent0002" data-entity-2="ent0005" data-link-type="dependency" data-source-line="16" id="lnk5"><path d="M328.1,251.9294 C337.75,258.1594 347.63,264.5394 356.97,270.5394 C377.81,283.9394 392.06,278.8094 403.97,300.5394 C440,366.2794 407.041,451.2468 383.231,498.2568" fill="none" id="pending-to-failed" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="380.52,503.6094,388.1549,497.3878,382.7792,499.1489,381.0181,493.7731,380.52,503.6094" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.2915" x="420.97" y="399.2263">Permission denied</text></g><!--link pending to completed--><g class="link" data-entity-1="ent0002" data-entity-2="ent0004" data-link-type="dependency" data-source-line="17" id="lnk6"><path d="M197.72,235.3194 C139.68,257.2294 61.58,297.2894 24.97,362.5394 C11,387.4394 11.76,401.4594 24.97,426.7794 C42.5,460.3694 70.5358,482.7085 101.7658,500.3485" fill="none" id="pending-to-completed" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="106.99,503.2994,101.1209,495.3903,102.6365,500.8403,97.1864,502.3559,106.99,503.2994" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="138.6582" x="25.97" y="399.2263">No execution needed</text></g><!--link progress to completed--><g class="link" data-entity-1="ent0003" data-entity-2="ent0004" data-link-type="dependency" data-source-line="19" id="lnk7"><path d="M243.32,426.9794 C236.09,436.3394 228.44,446.7694 221.97,456.7794 C212.35,471.6394 205.6406,483.577 198.1506,498.097" fill="none" id="progress-to-completed" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="195.4,503.4294,203.0809,497.2646,197.6922,498.9857,195.9711,493.5971,195.4,503.4294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="222.97" y="469.8463">Success</text></g><!--link progress to failed--><g class="link" data-entity-1="ent0003" data-entity-2="ent0005" data-link-type="dependency" data-source-line="20" id="lnk8"><path d="M290.3,427.2494 C305.68,450.0394 323.0026,475.6967 338.3626,498.4467" fill="none" id="progress-to-failed" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="341.72,503.4194,339.999,493.722,338.9222,499.2754,333.3688,498.1986,341.72,503.4194" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.2017" x="322.97" y="469.8463">Error</text></g><!--link completed to *end*--><g class="link" data-entity-1="ent0004" data-entity-2="ent0009" data-link-type="dependency" data-source-line="22" id="lnk10"><path d="M208.01,568.3594 C227.65,590.3994 248.4088,613.6894 260.1688,626.8894" fill="none" id="completed-to-*end*" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="264.16,631.3694,261.1598,621.9886,260.834,627.6361,255.1865,627.3103,264.16,631.3694" style="stroke:#000000;stroke-width:1;"/></g><!--link failed to *end*--><g class="link" data-entity-1="ent0005" data-entity-2="ent0009" data-link-type="dependency" data-source-line="23" id="lnk11"><path d="M334.61,568.3594 C314.76,590.3994 293.7557,613.7113 281.8657,626.9113" fill="none" id="failed-to-*end*" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="277.85,631.3694,286.8455,627.3593,281.1964,627.6543,280.9014,622.0051,277.85,631.3694" style="stroke:#000000;stroke-width:1;"/></g><?plantuml-src NLB1RXmX3Btp5MvEQQNPlUTGAOfoYDH4gwQtJhMYuDcWiXY1IPk_hu6PsKbEsFZv-Vd9d_W5pmZHQnUKOiSUuVRk08T4J8Oy3F23vBdJtiCpQouPlha9pPlng5IM7uIhYC6wSBe2dM6EuQOtceG2iMEu_QiTrqB4T7OvEmfZe0IP1N6k1HTYuPNJXMDCT4gOS-UTauKO_w4fbN0CZ_eDiem5AYmKKA8LYhnI6Jf7ZwAY4QsPCDrt4WgGYp72FXK_Xk-OYsVGhzfv_NkpvoGVCqiFtr5WIfJ6S5yViCY2QB9VdKMhrCylls0OlcuCOjdZQCJPOrUycANKWcduo-A7rJeu9HsQhp9B5wP1npfAchUzgyfDfyNWFi2sbZpHOgrW0sBJlchuY7xkjhq7NBofLYXrQQXLyK7DY2LLWMJxv4ul33Gj3YcOJwZUtkJGstmZVqFphHxaW-rflTeM_N5o1DTYejsZTRotMCVk-pwut-rsdnikjqDkeI6nCJ1SKwmRQzyHdeokUTuMwebLfVy1?></g></svg>