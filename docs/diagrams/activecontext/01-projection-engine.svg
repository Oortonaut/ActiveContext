<?plantuml 1.2026.1beta5?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1423px" preserveAspectRatio="none" style="width:1034px;height:1423px;background:#FEFEFE;" version="1.1" viewBox="0 0 1034 1423" width="1034px" zoomAndPan="magnify"><title>ActiveContext - Projection Engine Flow</title><defs/><g><rect fill="#FEFEFE" height="1423" style="stroke:none;stroke-width:1;" width="1034" x="0" y="0"/><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="483.2158" x="273.8975" y="35.4209">ActiveContext - Projection Engine Flow</text><g><title>ProjectionEngine</title><rect fill="#FFFFFF" height="1074.3984" style="stroke:#000000;stroke-width:1;" width="10" x="265.5859" y="157.1719"/></g><g><title>ProjectionEngine</title><rect fill="#ADD8E6" height="406.0703" style="stroke:#000000;stroke-width:1;" width="10" x="270.5859" y="295.7031"/></g><g><title>ProjectionEngine</title><rect fill="#90EE90" height="334.1328" style="stroke:#000000;stroke-width:1;" width="10" x="270.5859" y="789.0391"/></g><g><title>ContextGraph</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="600.6323" y="186.3047"/></g><rect fill="#FFFFFF" height="351.9375" style="stroke:#000000;stroke-width:1;" width="733.3364" x="164.7046" y="315.7031"/><rect fill="#FFFFFF" height="278.6719" style="stroke:#000000;stroke-width:1;" width="713.3364" x="174.7046" y="381.9688"/><rect fill="#FFFFFF" height="43.9375" style="stroke:none;stroke-width:1;" width="713.3364" x="174.7046" y="441.2344"/><rect fill="#FFFFFF" height="175.4688" style="stroke:none;stroke-width:1;" width="713.3364" x="174.7046" y="485.1719"/><rect fill="#FFFFFF" height="59.2656" style="stroke:#000000;stroke-width:1;" width="328.1948" x="184.7046" y="594.375"/><rect fill="#FFFFFF" height="280" style="stroke:#000000;stroke-width:1;" width="842.3062" x="174.7046" y="809.0391"/><rect fill="#FFFFFF" height="148.4688" style="stroke:#000000;stroke-width:1;" width="822.3062" x="184.7046" y="891.4375"/><rect fill="#FFFFFF" height="73.0703" style="stroke:none;stroke-width:1;" width="822.3062" x="184.7046" y="966.8359"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="S" id="part1-lifeline"><g><title>Session</title><rect fill="#000000" fill-opacity="0.00000" height="1305.4609" width="8" x="49.708" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="53" x2="53" y1="82.9063" y2="1388.3672"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="PE" id="part2-lifeline"><g><title>ProjectionEngine</title><rect fill="#000000" fill-opacity="0.00000" height="1305.4609" width="8" x="266.5859" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="269.7046" x2="269.7046" y1="82.9063" y2="1388.3672"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="CG" id="part3-lifeline"><g><title>ContextGraph</title><rect fill="#000000" fill-opacity="0.00000" height="1305.4609" width="8" x="601.6323" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="605.6152" x2="605.6152" y1="82.9063" y2="1388.3672"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="RP" id="part4-lifeline"><g><title>RenderPath</title><rect fill="#000000" fill-opacity="0.00000" height="1305.4609" width="8" x="735.5762" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="738.6494" x2="738.6494" y1="82.9063" y2="1388.3672"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="N" id="part5-lifeline"><g><title>Node</title><rect fill="#000000" fill-opacity="0.00000" height="1305.4609" width="8" x="838.772" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="842.5029" x2="842.5029" y1="82.9063" y2="1388.3672"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="AV" id="part6-lifeline"><g><title>AgentView</title><rect fill="#000000" fill-opacity="0.00000" height="1305.4609" width="8" x="938.5259" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="942.041" x2="942.041" y1="82.9063" y2="1388.3672"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="S" id="part1-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="67.416" x="20" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="53.416" x="27" y="71.6045">Session</text></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="S" id="part1-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="67.416" x="20" y="1387.3672"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="53.416" x="27" y="1407.3623">Session</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="PE" id="part2-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="131.7627" x="204.7046" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="117.7627" x="211.7046" y="71.6045">ProjectionEngine</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="PE" id="part2-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="131.7627" x="204.7046" y="1387.3672"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="117.7627" x="211.7046" y="1407.3623">ProjectionEngine</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="CG" id="part3-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="112.0342" x="549.6152" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="98.0342" x="556.6152" y="71.6045">ContextGraph</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="CG" id="part3-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="112.0342" x="549.6152" y="1387.3672"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="98.0342" x="556.6152" y="1407.3623">ContextGraph</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="RP" id="part4-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="95.8535" x="691.6494" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.8535" x="698.6494" y="71.6045">RenderPath</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="RP" id="part4-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="95.8535" x="691.6494" y="1387.3672"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.8535" x="698.6494" y="1407.3623">RenderPath</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="N" id="part5-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="50.5381" x="817.5029" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.5381" x="824.5029" y="71.6045">Node</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="N" id="part5-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="50.5381" x="817.5029" y="1387.3672"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.5381" x="824.5029" y="1407.3623">Node</text></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="AV" id="part6-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="88.9697" x="898.041" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="74.9697" x="905.041" y="71.6045">AgentView</text></g><g class="participant participant-tail" data-entity-uid="part6" data-qualified-name="AV" id="part6-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="88.9697" x="898.041" y="1387.3672"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="74.9697" x="905.041" y="1407.3623">AgentView</text></g><g><title>ProjectionEngine</title><rect fill="#FFFFFF" height="1074.3984" style="stroke:#000000;stroke-width:1;" width="10" x="265.5859" y="157.1719"/></g><g><title>ProjectionEngine</title><rect fill="#ADD8E6" height="406.0703" style="stroke:#000000;stroke-width:1;" width="10" x="270.5859" y="295.7031"/></g><g><title>ProjectionEngine</title><rect fill="#90EE90" height="334.1328" style="stroke:#000000;stroke-width:1;" width="10" x="270.5859" y="789.0391"/></g><g><title>ContextGraph</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="600.6323" y="186.3047"/></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1022.0107" x="5" y="113.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1027.0107" y1="113.4727" y2="113.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1027.0107" y1="116.4727" y2="116.4727"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="135.1387" x="448.436" y="102.9063"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="116.6128" x="454.436" y="118.9731">Build Projection</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#000000" points="253.5859,153.1719,263.5859,157.1719,253.5859,161.1719,257.5859,157.1719" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="53.708" x2="259.5859" y1="157.1719" y2="157.1719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.187" x="60.708" y="152.106">build(context_graph, cwd)</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#000000" points="588.6323,182.3047,598.6323,186.3047,588.6323,190.3047,592.6323,186.3047" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="275.5859" x2="594.6323" y1="186.3047" y2="186.3047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.0972" x="282.5859" y="181.2388">get_root() / get_roots()</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg3"><polygon fill="#000000" points="286.5859,211.4375,276.5859,215.4375,286.5859,219.4375,282.5859,215.4375" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="280.5859" x2="604.6323" y1="215.4375" y2="215.4375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="69.6973" x="292.5859" y="210.3716">root nodes</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1022.0107" x="5" y="244.0039"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1027.0107" y1="244.0039" y2="244.0039"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1027.0107" y1="247.0039" y2="247.0039"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="164.084" x="433.9634" y="233.4375"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145.5581" x="439.9634" y="249.5044">Collect Render Path</text><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg4"><line style="stroke:#000000;stroke-width:1;" x1="275.5859" x2="322.5859" y1="282.7031" y2="282.7031"/><line style="stroke:#000000;stroke-width:1;" x1="322.5859" x2="322.5859" y1="282.7031" y2="295.7031"/><line style="stroke:#000000;stroke-width:1;" x1="281.5859" x2="322.5859" y1="295.7031" y2="295.7031"/><polygon fill="#000000" points="291.5859,291.7031,281.5859,295.7031,291.5859,299.7031,287.5859,295.7031" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182.9966" x="287.5859" y="277.6372">_collect_render_path(graph)</text></g><path d="M164.7046,315.7031 L241.3286,315.7031 L241.3286,322.8359 L231.3286,332.8359 L164.7046,332.8359 L164.7046,315.7031" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="351.9375" style="stroke:#000000;stroke-width:1;" width="733.3364" x="164.7046" y="315.7031"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="179.7046" y="328.77">loop</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125.0659" x="256.3286" y="327.9136">[for each root node]</text><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg5"><line style="stroke:#000000;stroke-width:1;" x1="280.5859" x2="322.5859" y1="353.9688" y2="353.9688"/><line style="stroke:#000000;stroke-width:1;" x1="322.5859" x2="322.5859" y1="353.9688" y2="366.9688"/><line style="stroke:#000000;stroke-width:1;" x1="281.5859" x2="322.5859" y1="366.9688" y2="366.9688"/><polygon fill="#000000" points="291.5859,362.9688,281.5859,366.9688,291.5859,370.9688,287.5859,366.9688" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="291.0464" x="287.5859" y="348.9028">_collect_from_node(graph, node, path, seen)</text></g><path d="M174.7046,381.9688 L239.1475,381.9688 L239.1475,389.1016 L229.1475,399.1016 L174.7046,399.1016 L174.7046,381.9688" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="278.6719" style="stroke:#000000;stroke-width:1;" width="713.3364" x="174.7046" y="381.9688"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="189.7046" y="395.0356">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="151.2769" x="254.1475" y="394.1792">[node.state == HIDDEN]</text><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg6"><line style="stroke:#000000;stroke-width:1;" x1="280.5859" x2="322.5859" y1="420.2344" y2="420.2344"/><line style="stroke:#000000;stroke-width:1;" x1="322.5859" x2="322.5859" y1="420.2344" y2="433.2344"/><line style="stroke:#000000;stroke-width:1;" x1="281.5859" x2="322.5859" y1="433.2344" y2="433.2344"/><polygon fill="#000000" points="291.5859,429.2344,281.5859,433.2344,291.5859,437.2344,287.5859,433.2344" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.4536" x="287.5859" y="415.1685">skip (not added to path)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="174.7046" x2="888.041" y1="442.2344" y2="442.2344"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="250.5078" x="179.7046" y="452.4448">[node.state in [COLLAPSED, SUMMARY]]</text><g class="message" data-entity-1="part2" data-entity-2="part4" id="msg7"><polygon fill="#000000" points="727.5762,473.1719,737.5762,477.1719,727.5762,481.1719,731.5762,477.1719" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="280.5859" x2="733.5762" y1="477.1719" y2="477.1719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166.4546" x="287.5859" y="472.106">add node_id (no children)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="174.7046" x2="888.041" y1="486.1719" y2="486.1719"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="188.4448" x="179.7046" y="496.3823">[node.state in [DETAILS, ALL]]</text><g class="message" data-entity-1="part2" data-entity-2="part4" id="msg8"><polygon fill="#000000" points="727.5762,517.1094,737.5762,521.1094,727.5762,525.1094,731.5762,521.1094" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="280.5859" x2="733.5762" y1="521.1094" y2="521.1094"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="79.4092" x="287.5859" y="516.0435">add node_id</text></g><g class="message" data-entity-1="part2" data-entity-2="part5" id="msg9"><polygon fill="#000000" points="830.772,546.2422,840.772,550.2422,830.772,554.2422,834.772,550.2422" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="280.5859" x2="836.772" y1="550.2422" y2="550.2422"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.7349" x="287.5859" y="545.1763">get child_order</text></g><g class="message" data-entity-1="part5" data-entity-2="part2" id="msg10"><polygon fill="#000000" points="291.5859,575.375,281.5859,579.375,291.5859,583.375,287.5859,579.375" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="285.5859" x2="841.772" y1="579.375" y2="579.375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.7197" x="297.5859" y="574.3091">ordered children</text></g><path d="M184.7046,594.375 L261.3286,594.375 L261.3286,601.5078 L251.3286,611.5078 L184.7046,611.5078 L184.7046,594.375" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:1;" width="328.1948" x="184.7046" y="594.375"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="199.7046" y="607.4419">loop</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94.4829" x="276.3286" y="606.5854">[for each child]</text><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg11"><line style="stroke:#000000;stroke-width:1;" x1="280.5859" x2="322.5859" y1="632.6406" y2="632.6406"/><line style="stroke:#000000;stroke-width:1;" x1="322.5859" x2="322.5859" y1="632.6406" y2="645.6406"/><line style="stroke:#000000;stroke-width:1;" x1="281.5859" x2="322.5859" y1="645.6406" y2="645.6406"/><polygon fill="#000000" points="291.5859,641.6406,281.5859,645.6406,291.5859,649.6406,287.5859,645.6406" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198.3135" x="287.5859" y="627.5747">_collect_from_node() [recurse]</text></g><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg12"><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="280.5859" x2="322.5859" y1="700.7734" y2="700.7734"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="322.5859" x2="322.5859" y1="700.7734" y2="713.7734"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="275.5859" x2="322.5859" y1="713.7734" y2="713.7734"/><polygon fill="#000000" points="285.5859,709.7734,275.5859,713.7734,285.5859,717.7734,281.5859,713.7734" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="251.0181" x="287.5859" y="695.7075">RenderPath(node_ids, edges, root_ids)</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1022.0107" x="5" y="737.3398"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1027.0107" y1="737.3398" y2="737.3398"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1027.0107" y1="740.3398" y2="740.3398"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="196.1143" x="417.9482" y="726.7734"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="177.5884" x="423.9482" y="742.8403">Render Path to Sections</text><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg13"><line style="stroke:#000000;stroke-width:1;" x1="275.5859" x2="322.5859" y1="776.0391" y2="776.0391"/><line style="stroke:#000000;stroke-width:1;" x1="322.5859" x2="322.5859" y1="776.0391" y2="789.0391"/><line style="stroke:#000000;stroke-width:1;" x1="281.5859" x2="322.5859" y1="789.0391" y2="789.0391"/><polygon fill="#000000" points="291.5859,785.0391,281.5859,789.0391,291.5859,793.0391,287.5859,789.0391" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="206.0449" x="287.5859" y="770.9731">_render_path(graph, path, cwd)</text></g><path d="M174.7046,809.0391 L251.3286,809.0391 L251.3286,816.1719 L241.3286,826.1719 L174.7046,826.1719 L174.7046,809.0391" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="280" style="stroke:#000000;stroke-width:1;" width="842.3062" x="174.7046" y="809.0391"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="189.7046" y="822.106">loop</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="218.8237" x="266.3286" y="821.2495">[for each node_id in path.node_ids]</text><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg14"><polygon fill="#000000" points="593.6323,843.3047,603.6323,847.3047,593.6323,851.3047,597.6323,847.3047" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="280.5859" x2="599.6323" y1="847.3047" y2="847.3047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.2402" x="287.5859" y="842.2388">get_node(node_id)</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg15"><polygon fill="#000000" points="291.5859,872.4375,281.5859,876.4375,291.5859,880.4375,287.5859,876.4375" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="285.5859" x2="604.6323" y1="876.4375" y2="876.4375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.4429" x="297.5859" y="871.3716">node</text></g><path d="M184.7046,891.4375 L249.1475,891.4375 L249.1475,898.5703 L239.1475,908.5703 L184.7046,908.5703 L184.7046,891.4375" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="148.4688" style="stroke:#000000;stroke-width:1;" width="822.3062" x="184.7046" y="891.4375"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="199.7046" y="904.5044">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="102.5288" x="264.1475" y="903.6479">[has AgentView]</text><g class="message" data-entity-1="part2" data-entity-2="part6" id="msg16"><polygon fill="#000000" points="930.5259,925.7031,940.5259,929.7031,930.5259,933.7031,934.5259,929.7031" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="280.5859" x2="936.5259" y1="929.7031" y2="929.7031"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.4473" x="287.5859" y="924.6372">render(content, budget)</text></g><g class="message" data-entity-1="part6" data-entity-2="part2" id="msg17"><polygon fill="#000000" points="291.5859,954.8359,281.5859,958.8359,291.5859,962.8359,287.5859,958.8359" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="285.5859" x2="941.5259" y1="958.8359" y2="958.8359"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="100.877" x="297.5859" y="953.77">rendered string</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="184.7046" x2="1007.0107" y1="967.8359" y2="967.8359"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96.1157" x="189.7046" y="978.0464">[no AgentView]</text><g class="message" data-entity-1="part2" data-entity-2="part5" id="msg18"><polygon fill="#000000" points="830.772,998.7734,840.772,1002.7734,830.772,1006.7734,834.772,1002.7734" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="280.5859" x2="836.772" y1="1002.7734" y2="1002.7734"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.9644" x="287.5859" y="997.7075">Render(cwd=cwd)</text></g><g class="message" data-entity-1="part5" data-entity-2="part2" id="msg19"><polygon fill="#000000" points="291.5859,1027.9063,281.5859,1031.9063,291.5859,1035.9063,287.5859,1031.9063" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="285.5859" x2="841.772" y1="1031.9063" y2="1031.9063"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="100.877" x="297.5859" y="1026.8403">rendered string</text></g><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg20"><line style="stroke:#000000;stroke-width:1;" x1="280.5859" x2="322.5859" y1="1068.0391" y2="1068.0391"/><line style="stroke:#000000;stroke-width:1;" x1="322.5859" x2="322.5859" y1="1068.0391" y2="1081.0391"/><line style="stroke:#000000;stroke-width:1;" x1="281.5859" x2="322.5859" y1="1081.0391" y2="1081.0391"/><polygon fill="#000000" points="291.5859,1077.0391,281.5859,1081.0391,291.5859,1085.0391,287.5859,1081.0391" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.7803" x="287.5859" y="1062.9731">create ProjectionSection</text></g><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg21"><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="280.5859" x2="322.5859" y1="1122.1719" y2="1122.1719"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="322.5859" x2="322.5859" y1="1122.1719" y2="1135.1719"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="275.5859" x2="322.5859" y1="1135.1719" y2="1135.1719"/><polygon fill="#000000" points="285.5859,1131.1719,275.5859,1135.1719,285.5859,1139.1719,281.5859,1135.1719" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.3335" x="287.5859" y="1117.106">list[ProjectionSection]</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1022.0107" x="5" y="1158.7383"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1027.0107" y1="1158.7383" y2="1158.7383"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1027.0107" y1="1161.7383" y2="1161.7383"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="168.2354" x="431.8877" y="1148.1719"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="149.7095" x="437.8877" y="1164.2388">Assemble Projection</text><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg22"><polygon fill="#000000" points="593.6323,1198.4375,603.6323,1202.4375,593.6323,1206.4375,597.6323,1202.4375" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="275.5859" x2="599.6323" y1="1202.4375" y2="1202.4375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="226.6938" x="282.5859" y="1197.3716">collect handles (node_id -&gt; digest)</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg23"><polygon fill="#000000" points="64.708,1227.5703,54.708,1231.5703,64.708,1235.5703,60.708,1231.5703" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="58.708" x2="269.5859" y1="1231.5703" y2="1231.5703"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="187.8779" x="70.708" y="1226.5044">Projection(sections, handles)</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1022.0107" x="5" y="1260.1367"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1027.0107" y1="1260.1367" y2="1260.1367"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1027.0107" y1="1263.1367" y2="1263.1367"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="130.6953" x="450.6577" y="1249.5703"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112.1694" x="456.6577" y="1265.6372">Render for LLM</text><g class="message" data-entity-1="part1" data-entity-2="part1" id="msg24"><line style="stroke:#000000;stroke-width:1;" x1="53.708" x2="95.708" y1="1330.6016" y2="1330.6016"/><line style="stroke:#000000;stroke-width:1;" x1="95.708" x2="95.708" y1="1330.6016" y2="1343.6016"/><line style="stroke:#000000;stroke-width:1;" x1="54.708" x2="95.708" y1="1343.6016" y2="1343.6016"/><polygon fill="#000000" points="64.708,1339.6016,54.708,1343.6016,64.708,1347.6016,60.708,1343.6016" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.6621" x="60.708" y="1325.5356">projection.render()</text></g><path d="M194.6621,1287.7031 L194.6621,1372.7031 L365.6621,1372.7031 L365.6621,1297.7031 L355.6621,1287.7031 L194.6621,1287.7031" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M355.6621,1287.7031 L355.6621,1297.7031 L365.6621,1297.7031 L355.6621,1287.7031" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="69.8179" x="200.6621" y="1304.77">"\n\n".join(</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="100.7246" x="208.9268" y="1319.9028">section.content</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.5366" x="208.9268" y="1335.0356">for section in sections</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113.0454" x="208.9268" y="1350.1685">if section.content</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.0718" x="200.6621" y="1365.3013">)</text><?plantuml-src XLHTRzim37pNh-3I5njmi_S16U0cQLR0pO9uAp2qXU7QggFEaGn9MVVpHqfsR2T1XwRv4CaZTNVq9xlZUmvDdGl9p6yXcrpdUtZ9Yz-LLWTPpbMjD5pTBkcFCIjipI4khFZ3vqfQ_jV2DMoqUkDufYGiPIKaXzjQlJE6O5OKeicbXKdAZS6C2UG6qd6eh_VbBcUp72UrxLOwRtOkORuQ9sovBBdUvDQ7jvjnUArA3xmUdySLb_P1y7SNZ1yOcytWvY3gSdYlsOon5Aw_ubZm1Lue71H-egoYaI8etikGvKHDRZcDpp0NA-OhhAYupRHIDWZXy_672GO5U1tClEvQK1mapcnOoOT9D1wgKkDWuAyCT6SteM_ewhF2vsJQvMGDvWHkqj6GS9M8QcTlwWDdh5QgWLVK6nlk-WaOm2NWLwts6SM3bW3w7W4rYi1mBaCin5TUUvYfiTGJn_zsjrWirnWQ0QFz6WWaDitBafTWbSCY55uRFiGG4XxdtvCatgJBHGJfp_lxUFlhUO2utI0YuhYgJ9G43CKEPTD-i4kGY-MF-2v98uYJv2EmGMZjjVNGcT98jOkkUoNT8Twdw-xYOwfTo9t_Z-eG7ZKl3jfmFo2Ao_mx_Ji3TDNzFWJjt2O2NbOSFqXREWY7vYBBeZf3Kw46gTy0SsQmCsDrsfykGkknbKPFd9giamVff-9fD-dHSyVjSTTlmoJWS5bQbxPcsz4UTrizq2f-eBroK_lTbJR2LKP6REZICA7VFvU7iXchXQnwnro4NX_v3l3sCyV0YGqk03hjnjjLQEv8EpvvMlhFvQs5iOzdUSyN18sDuVkNcfy-pmO4jqP3wcHPSmCTqPHG2hGCCjGsJp6z1mfCQu-eg_t0KgHwajpt3rF2QevOqrQRaE53W8Ccqo0xaoVv92VJDoLau4XjMqvR3TqPGRVdvALkAXSJhnTAGc8KgD4_?></g></svg>